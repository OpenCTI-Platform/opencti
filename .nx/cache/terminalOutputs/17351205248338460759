> python worker.py

{"timestamp": "2026-02-06T15:08:19.655845Z", "level": "INFO", "name": "api", "message": "Getting connectors ..."}
{"timestamp": "2026-02-06T15:08:19.670090Z", "level": "ERROR", "name": "worker", "message": "ConnectionError", "exc_info": "Traceback (most recent call last):\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/connection.py\", line 204, in _new_conn\n    sock = connection.create_connection(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/util/connection.py\", line 85, in create_connection\n    raise err\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/util/connection.py\", line 73, in create_connection\n    sock.connect(sa)\nConnectionRefusedError: [Errno 61] Connection refused\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/connectionpool.py\", line 493, in _make_request\n    conn.request(\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/connection.py\", line 500, in request\n    self.endheaders()\n  File \"/Users/florian.delemarre/.pyenv/versions/3.12.7/lib/python3.12/http/client.py\", line 1331, in endheaders\n    self._send_output(message_body, encode_chunked=encode_chunked)\n  File \"/Users/florian.delemarre/.pyenv/versions/3.12.7/lib/python3.12/http/client.py\", line 1091, in _send_output\n    self.send(msg)\n  File \"/Users/florian.delemarre/.pyenv/versions/3.12.7/lib/python3.12/http/client.py\", line 1035, in send\n    self.connect()\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/connection.py\", line 331, in connect\n    self.sock = self._new_conn()\n                ^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/connection.py\", line 219, in _new_conn\n    raise NewConnectionError(\nurllib3.exceptions.NewConnectionError: HTTPConnection(host='localhost', port=4000): Failed to establish a new connection: [Errno 61] Connection refused\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/requests/adapters.py\", line 644, in send\n    resp = conn.urlopen(\n           ^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n              ^^^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/urllib3/util/retry.py\", line 535, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=4000): Max retries exceeded with url: /graphql (Caused by NewConnectionError(\"HTTPConnection(host='localhost', port=4000): Failed to establish a new connection: [Errno 61] Connection refused\"))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/florian.delemarre/filigran/octi/opencti/opencti-worker/src/worker.py\", line 257, in start\n    connectors: List[Any] = self.api.connector.list()\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/opencti/client-python/pycti/api/opencti_api_connector.py\", line 101, in list\n    result = self.api.query(query)\n             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/opencti/client-python/pycti/api/opencti_api_client.py\", line 711, in query\n    r = self.session.post(\n        ^^^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/requests/sessions.py\", line 637, in post\n    return self.request(\"POST\", url, data=data, json=json, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/requests/sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/requests/sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/florian.delemarre/filigran/octi/.python-venv/lib/python3.12/site-packages/requests/adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=4000): Max retries exceeded with url: /graphql (Caused by NewConnectionError(\"HTTPConnection(host='localhost', port=4000): Failed to establish a new connection: [Errno 61] Connection refused\"))", "attributes": {"reason": "HTTPConnectionPool(host='localhost', port=4000): Max retries exceeded with url: /graphql (Caused by NewConnectionError(\"HTTPConnection(host='localhost', port=4000): Failed to establish a new connection: [Errno 61] Connection refused\"))"}}
{"timestamp": "2026-02-06T15:08:39.389939Z", "level": "INFO", "name": "worker", "message": "Thread for worker terminated"}
